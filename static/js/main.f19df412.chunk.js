(this.webpackJsonpnc=this.webpackJsonpnc||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=(a(15),a(16),a(17),a(2)),l=a(3),s=a(5),u=a(6),m=a(7),p=[{name:"Age",units:"blockgroups",menu:0},{name:"Income",units:"blockgroups",menu:0},{name:"Race",units:"blockgroups",menu:0},{name:"Rental",units:"blockgroups",menu:0},{name:"Broadband",units:"blockgroups",menu:0},{name:"Elections",units:"precincts",menu:2},{name:"Emitters",units:"points",menu:1},{name:"Coal Ash",units:"points",menu:1},{name:"Colleges",units:"points",menu:1},{name:"Hospitals",units:"points",menu:1}],d=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this)).state={selectItem:0},n.clickTest=n.clickTest.bind(Object(m.a)(n)),n}return Object(l.a)(a,[{key:"clickTest",value:function(e,t){e.preventDefault(),this.props.disabled||(this.setState({selectItem:p.indexOf(t)}),this.props.switchLayer(p.indexOf(t)))}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar navbar-expand-lg",style:{borderBottom:"2px solid silver"}},r.a.createElement("ul",{className:"navbar-nav mr-auto"},["Demographics","Points","Elections"].map((function(t,a){return r.a.createElement("li",{className:"nav-item dropdown",key:a},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},p.filter((function(e){return e.menu===a})).map((function(t,a){return r.a.createElement("a",{key:a,className:"dropdown-item",href:"#",onClick:function(a){e.clickTest(a,t)}},t.name)}))))}))))}}]),a}(r.a.Component);function h(e){var t=[{color:"#f00",visible:!0,displayNumber:1,id:0},{color:"#00f",visible:!0,displayNumber:2,id:1}];return r.a.createElement("div",{className:"ui-option"},r.a.createElement("ol",{className:"icon-list color-list"},t.filter((function(e){return e.visible})).map((function(e,t){return r.a.createElement("li",{className:"icon-list__item color-list__item",title:e.displayNumber,key:t},r.a.createElement("input",{type:"radio",id:"brush-color__"+e.id,name:"brush-color",value:e.id,checked:!0,onChange:null}),r.a.createElement("div",{className:"icon-list__item__radio",style:{background:e.color}}))})),function(e,t){var a=e.find((function(e){return!1===e.visible}));return a?r.a.createElement("button",{className:"icon-list__item subtle-button",onClick:function(){a.visible=!0,t({target:{value:a.id}})},title:"Add another color"},r.a.createElement("i",{className:"material-icons"},"add")):""}(t,(function(){}))))}var f=a(1);function v(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var a,n,r="#";for(n=0;n<3;n++)a=parseInt(e.substr(2*n,2),16),r+=("00"+(a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16))).substr(a.length);return r}function g(e){var t=["match",["feature-state","color"]].concat(Object(f.a)(e.map((function(e){return[e.id,e.color]})).reduce((function(e,t){return[].concat(Object(f.a)(e),Object(f.a)(t))}))),["rgba(0, 0, 0, 0)"]);return["case",["boolean",["feature-state","hover"],!1],["match",["feature-state","color"]].concat(Object(f.a)(e.map((function(e){return[e.id,e.hoverColor]})).reduce((function(e,t){return[].concat(Object(f.a)(e),Object(f.a)(t))}))),["#aaaaaa"]),t]}function y(e){return["case",["==",["feature-state","hover"],!0],v(e,-.3),e]}var E=["case",["<",["get","B19013_001"],3e4],y("#edf8fb"),["<",["get","B19013_001"],6e4],y("#ccece6"),["<",["get","B19013_001"],9e4],y("#99d8c9"),["<",["get","B19013_001"],12e4],y("#66c2a4"),["<",["get","B19013_001"],15e4],y("#2ca25f"),y("#006d2c")],b=["case",["<",["get","B01002_001"],20],y("#edf8fb"),["<",["get","B01002_001"],35],y("#ccece6"),["<",["get","B01002_001"],50],y("#99d8c9"),["<",["get","B01002_001"],65],y("#66c2a4"),["<",["get","B01002_001"],80],y("#2ca25f"),y("#006d2c")],k=[0,"rgba(0,0,0,0)",.499,"rgba(0,0,0,0)",.5,"rgba(249,249,249,0)",1,"rgb(25, 118, 210)"],_=[0,"rgba(0,0,0,0)",.499,"rgba(0,0,0,0)",.5,"rgba(174,174,174,0.5)",1,"rgb(18, 83, 147)"],S=[0,"rgba(0,0,0,0)",.499,"rgba(0,0,0,0)",.5,"rgba(249,249,249,0)",1,"rgb(211, 47, 47)"],L=[0,"rgba(0,0,0,0)",.499,"rgba(0,0,0,0)",.5,"rgba(174,174,174,0.5)",1,"rgb(148, 33, 33)"];function P(e){return["case",["==",["get","TOTPOP"],0],"#ccc",["interpolate",["linear"],["/",["get",e[1]],["get","TOTPOP"]],0,["case",["==",["feature-state","hover"],!0],"rgba(140, 140, 179, 0)","rgba(200, 200, 255, 0)"],e[2]+.01,["case",["==",["feature-state","hover"],!0],"rgba(0, 0, 179, 0.6)","rgba(0, 0, 255, 0.6)"]]]}var O=["case",["==",["+",["get","B25003_002"],["get","B25003_003"]],0],"#ccc",[">",["/",["get","B25003_003"],["+",["get","B25003_002"],["get","B25003_003"]]],.5],y("#FFA500"),y("#00008B")],N=["case",["==",["get","TOTPOP"],0],"#ccc",[">",["/",["get","B28008_004"],["get","TOTPOP"]],.75],y("#FFA500"),y("#00008B")];var w={"circle-radius":4,"circle-color":["match",["get","CLASS_STATUS"],"Title V","purple","Synthetic Minor","green","Small","red","Permit Exempt","blue","Registered","orange","Permit/Registration Pending","yellow","#ccc"]};function M(e){var t={},a=[],n=e.selected,i="",c=0;if(n.length){(a=Object.keys(n[0].properties).filter((function(e){return 0===e.indexOf("age_")})).sort((function(e,t){return e.split("_")[1].replace("lt","0")-t.split("_")[1].replace("lt","0")}))).forEach((function(e){return t[e]=0}));var o=0;n.forEach((function(e){var n=e.properties.TOTPOP;a.forEach((function(a){t[a]+=e.properties[a],n-=e.properties[a]})),o+=e.properties.TOTPOP,e.properties.age_85_plu||(e.properties.age_85_90=n)}));var l=o/2;a.forEach((function(e,a){""===i&&(l-=t[e])<=0&&(i=a)}))}var s=a.map((function(e){var a=e.replace("lt_5","0_4").replace("85_plu","85_90").split("_"),n=2===a.length?1:a[2]-a[1]+1,r=t[e]/n;return c=Math.max(c,r),{width:6*n,height:r}}));return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: Median Age"),r.a.createElement("div",{className:"palette"},b.filter((function(e){return"case"===e[0]})).map((function(e,t){return r.a.createElement("div",{className:"square",key:t,style:{background:e[3]}})}))),r.a.createElement("div",{className:"nums"},b.filter((function(e){return"<"===e[0]})).map((function(e,t){return r.a.createElement("div",{className:"square",key:t},t?"":"< ",e[2])})),r.a.createElement("div",{className:"square"},"> ",b[b.length-3][2])),r.a.createElement("span",null,"Source: US Census ACS (2018)"),r.a.createElement("div",{className:"histogram"},s.map((function(e,t){var a=t===i;return r.a.createElement("div",{key:t,style:{background:a?"#888":"#444",width:e.width,height:e.height/c*100}})}))),s.length?r.a.createElement("div",null,r.a.createElement("small",null,"Youngest to Oldest")):null)}function R(e){var t=[],a=[],n=e.selected,i="",c="",o=0;if(n.length){a=Object.keys(n[0].properties).filter((function(e){return 0===e.indexOf("B19001_")})).sort(),t=a.map((function(e){return 0}));n.forEach((function(e){var n=e.properties.B25003_002+e.properties.B25003_003;a.forEach((function(a,r){t[r]+=e.properties[a],n-=e.properties[a]})),e.properties.B19001_017||(e.properties.B19001_017=n)}));var l=0;t.forEach((function(e,t){o=Math.max(o,e),""===i&&(l-=e)<=0&&(i=t,c=["< 10k","10-15k","15-20k","20-25k","25-30k","30-35k","35-40k","40-45k","45-50k","50-60k","60-75k","75-100k","100-125k","125-150k","150-200k","> 200k"][t])}))}return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: Median Household Income"),r.a.createElement("div",{className:"palette"},E.filter((function(e){return"case"===e[0]})).map((function(e,t){return r.a.createElement("div",{className:"square",key:t,style:{background:e[3]}})}))),r.a.createElement("div",{className:"nums"},E.filter((function(e){return"<"===e[0]})).map((function(e,t){return r.a.createElement("div",{className:"square",key:t},t?"":"< ",Math.floor(e[2]/1e3),"k")})),r.a.createElement("div",{className:"square"},"> ",Math.floor(E[E.length-3][2]/1e3),"k")),r.a.createElement("span",null,"Source: US Census ACS (2018)"),r.a.createElement("div",{className:"histogram"},t.map((function(e,t){var a=t===i;return r.a.createElement("div",{key:t,style:{background:a?"#888":"#444",width:24,height:e/o*100}})}))),t.length?r.a.createElement("div",null,r.a.createElement("small",null,"Least to Most"),r.a.createElement("br",null),c?r.a.createElement("span",null,"Median: ",c.replace("age_","").replace("_"," \u2013 ")):null):null)}function j(e){e.selected;return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: Renter vs. Owner-occupied Households"),r.a.createElement("br",null),r.a.createElement("span",null,"Source: US Census ACS (2018)"),r.a.createElement("div",{className:"palette"},r.a.createElement("div",{className:"square",style:{background:"#ccc",marginRight:8}}),"No Housing",r.a.createElement("br",null),r.a.createElement("div",{className:"square",style:{background:"darkblue",marginRight:8}}),r.a.createElement("span",null,"Renters <= 50%"),r.a.createElement("br",null),r.a.createElement("div",{className:"square",style:{background:"orange",marginRight:8}}),r.a.createElement("span",null,"Renters > 50%")))}var F=[[2016,"President","EL16G_PR_D","EL16G_PR_R"],[2016,"Governor","EL16G_GV_D","EL16G_GV_R"],[2016,"US Senate","EL16G_US_1","EL16G_USS_"],[2014,"US Senate","EL14G_US_1","EL14G_USS_"],[2012,"President","EL12G_PR_D","EL12G_PR_R"],[2012,"Governor","EL12G_GV_D","EL12G_GV_R"],[2008,"Governor","EL08G_GV_D","EL08G_GV_R"],[2008,"US Senate","EL08G_USS_","EL08G_US_1"],[2010,"US Senate","EL10G_USS_","EL10G_US_1"]];function C(e){var t=e.selected,a={};if(t.length){var n=Object.keys(t[0].properties).filter((function(e){return 0===e.indexOf("EL")}));n.forEach((function(e){return a[e]=0})),t.forEach((function(e){n.forEach((function(t){return a[t]+=e.properties[t]}))}))}return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: Vote Partisanship"),r.a.createElement("p",null,"Source: MGGG, North Carolina General Assembly, National Historic GIS (NHGIS)"),r.a.createElement("br",null),r.a.createElement("select",{value:e.selectedElection,onChange:e.changeElection},F.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e[0]+" "+e[1])}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,"Two-party vote share"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Year"),r.a.createElement("th",null,"Position"),r.a.createElement("th",null,"Democratic"),r.a.createElement("th",null,"Republican"))),r.a.createElement("tbody",null,F.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e[0]),r.a.createElement("td",null,e[1]),r.a.createElement("td",{className:"digits"},(a[e[2]]||0).toLocaleString()),r.a.createElement("td",{className:"digits"},(a[e[3]]||0).toLocaleString()))})))))}var B=[["White","NH_WHITE",1,"#f00"],["Black","NH_BLACK",1,"#f0f"],["Hispanic","HISP",.81,"#00f"],["Asian","NH_ASIAN",.65,"#0f0"],["American Indian","NH_AMIN",.93,"#ff0"],["Native Hawaiian or Pacific Islander","NH_NHPI",.02,"#0ff"],["Other","NH_OTHER",.2,"#ccc"],["2+ Races","NH_2MORE",.13,"#ccc"]],G=[0,1,2,3,4,5,6,7,8].map((function(e,t){return"rgba(".concat(200*(8-t)/8,", ").concat(200*(8-t)/8,", 255, ").concat(t/8*.6,")")})),A=[];function I(e){var t=e.selected.length?e.selected:A;return A=t,r.a.createElement("div",null,r.a.createElement("span",null,"Source: US Census ACS (2018)"),r.a.createElement("br",null),r.a.createElement("select",{value:e.focusRace,onChange:e.changeFocus},B.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e[0])}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"palette gradient",style:{background:"linear-gradient(to right, rgba(200, 200, 255, 0), rgba(0, 0, 255, 0.6))"}}),r.a.createElement("div",{className:"nums"},G.map((function(t,a){return r.a.createElement("div",{className:"square",key:a},(Math.min(1,B[e.focusRace][2]+.01)*a/.08).toFixed(1))})),r.a.createElement("div",{className:"palette",style:{textAlign:"center",width:330}},"% of blockgroup")),r.a.createElement("div",{className:"popbars"},t.sort((function(e,t){return e.properties.GEOID-t.properties.GEOID})).map((function(e,a){return r.a.createElement("span",{className:"color-col",key:a},B.filter((function(t){return e.properties[t[1]]})).map((function(a,n){return r.a.createElement("span",{className:"segment",key:n,style:{background:a[3],height:e.properties[a[1]]/e.properties.TOTPOP*100,width:Math.max(1,500/t.length)}})})))}))))}var T=function(e){return r.a.createElement("span",{style:{background:e}})};function x(e){e.selected;return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: Environment"),r.a.createElement("br",null),r.a.createElement("span",null,"Source: North Carolina Department of Environmental Quality"),r.a.createElement("br",null),r.a.createElement("span",null,"Environmental Map Key"),r.a.createElement("br",null),r.a.createElement("ul",{className:"colorList"},r.a.createElement("li",null,T("purple")," Title V"),r.a.createElement("li",null,T("green")," Synthetic Minor"),r.a.createElement("li",null,T("red")," Small"),r.a.createElement("li",null,T("blue")," Permit Exempt"),r.a.createElement("li",null,T("orange")," Registered"),r.a.createElement("li",null,T("yellow")," Permit/Registration Pending")))}function H(e){e.selected;return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: Hospitals"),r.a.createElement("br",null),r.a.createElement("span",null,"Source: Homeland Infrastructure Foundation"))}function U(e){e.selected;return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: Colleges & Universities"),r.a.createElement("br",null),r.a.createElement("span",null,"Source: Homeland Infrastructure Foundation"))}function q(e){e.selected;return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: Coal Ash Facilities"),r.a.createElement("br",null),r.a.createElement("span",null,"Source: North Carolina Department of Environmental Quality"))}function D(e){e.selected;return r.a.createElement("div",null,r.a.createElement("span",null,"Layer: People subscribed to Broadband Internet"),r.a.createElement("br",null),r.a.createElement("span",null,"Source: US Census ACS (2018)"),r.a.createElement("div",{className:"palette"},r.a.createElement("div",{className:"square",style:{background:"#ccc",marginRight:8}}),"No Population",r.a.createElement("br",null),r.a.createElement("div",{className:"square",style:{background:"darkblue",marginRight:8}}),r.a.createElement("span",null,"Broadband subscriptions <= 75%"),r.a.createElement("br",null),r.a.createElement("div",{className:"square",style:{background:"orange",marginRight:8}}),r.a.createElement("span",null,"Broadband subscriptions > 75%")))}var V=a(4);var z=function(){function e(t,a,n){Object(o.a)(this,e),this.map=t,this.layer=a,this.id=a.id,this.sourceId=a.source,this.type=a.type,this.sourceLayer=a["source-layer"],n?n(t,a):t&&t.addLayer(a),this.getFeature=this.getFeature.bind(this)}return Object(l.a)(e,[{key:"addToMap",value:function(e){e&&!this.map&&(this.map=e,e.addLayer(this.layer))}},{key:"remove",value:function(){this.map&&(this.map.removeLayer(this.id),this.map=null)}},{key:"setOpacity",value:function(e,t){this.setPaintProperty("".concat(t?"text":this.type.replace("symbol","icon"),"-opacity"),e)}},{key:"setColor",value:function(e){this.setPaintProperty("".concat(this.type,"-color"),e)}},{key:"getColor",value:function(){return this.getPaintProperty("".concat(this.type,"-color"))}},{key:"setPaintProperties",value:function(e){for(var t in e)this.setPaintProperty(t,e[t])}},{key:"setFeatureState",value:function(e,t){this.map.setFeatureState({source:this.sourceId,sourceLayer:this.sourceLayer,id:e},t)}},{key:"setPaintProperty",value:function(e,t){this.map.setPaintProperty(this.id,e,t)}},{key:"getPaintProperty",value:function(e){return this.map.getPaintProperty(this.id,e)}},{key:"getFeatureState",value:function(e){return this.map.getFeatureState({source:this.sourceId,sourceLayer:this.sourceLayer,id:e})}},{key:"getFeature",value:function(e){return this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer,filter:["==",["id"],e]})[0]}},{key:"queryRenderedFeatures",value:function(){return this.map.queryRenderedFeatures(null,{layers:[this.id]})}},{key:"querySourceFeatures",value:function(){return this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer})}},{key:"getAssignment",value:function(e){return this.getFeatureState(e).color}},{key:"setAssignment",value:function(e,t){this.setFeatureState(e.id,Object(V.a)({},e.state,{color:t}))}},{key:"on",value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];(t=this.map).on.apply(t,[e,this.id].concat(n))}},{key:"off",value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];(t=this.map).off.apply(t,[e,this.id].concat(n))}},{key:"untilSourceLoaded",value:function(e){var t=this;if(this.map.isSourceLoaded(this.sourceId))return e();this.map.on("sourcedata",(function a(){return e((function(){return t.map.off("sourcedata",a)}))}))}}]),e}(),J=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e,n,r){var i;return Object(o.a)(this,a),(i=t.call(this,e)).radius=n,i.hoveredFeatures=[],i.setMapSelection=r,i}return Object(l.a)(a,[{key:"hoverOff",value:function(){var e=this;this.hoveredFeatures.forEach((function(t){var a=e.layer.getFeatureState(t.id);e.layer.setFeatureState(t.id,Object(V.a)({},a,{hover:!1}))})),this.hoveredFeatures=[],this.setMapSelection(this.hoveredFeatures)}},{key:"hoverOn",value:function(e){var t=this;this.hoveredFeatures=e,this.deactivatedHover||this.hoveredFeatures.forEach((function(e){t.layer.setFeatureState(e.id,Object(V.a)({},e.state,{hover:!0}))})),this.setMapSelection(this.hoveredFeatures)}},{key:"onMouseMove",value:function(e){var t=function(e,t){var a=[e.x+t,e.y+t];return[[e.x-t,e.y-t],a]}(e.point,this.radius),a=this.layer.map.queryRenderedFeatures(t,{layers:[this.layer.id]});a.length>0&&(this.hoverOff(),this.hoverOn(a))}}]),a}(function(){function e(t){Object(o.a)(this,e),this.layer=t,this.hoveredFeature=null,this.deactivatedHover=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.hoverOff=this.hoverOff.bind(this)}return Object(l.a)(e,[{key:"hoverOff",value:function(){null!==this.hoveredFeature&&(this.layer.setFeatureState(this.hoveredFeature.id,Object(V.a)({},this.hoveredFeature.state,{hover:!1})),this.hoveredFeature=null)}},{key:"hoverOn",value:function(e){this.hoveredFeature=e,this.deactivatedHover||this.layer.setFeatureState(e.id,Object(V.a)({},e.state,{hover:!0}))}},{key:"onMouseMove",value:function(e){e.features.length>0&&(this.hoverOff(),this.hoverOn(e.features[0]))}},{key:"onMouseLeave",value:function(){this.hoverOff()}},{key:"activate",value:function(e){e?this.deactivatedHover=!1:(this.layer.on("mousemove",this.onMouseMove),this.layer.on("mouseleave",this.onMouseLeave),this.layer.on("touchmove",this.onMouseMove),this.layer.on("touchend",this.onMouseLeave))}},{key:"deactivate",value:function(e){e?this.deactivatedHover=!0:(this.layer.off("mousemove",this.onMouseMove),this.layer.off("mouseleave",this.onMouseLeave),this.layer.off("touchmove",this.onMouseMove),this.layer.off("touchend",this.onMouseLeave))}}]),e}());window.mapboxgl.accessToken="pk.eyJ1IjoiZGlzdHJpY3RyIiwiYSI6ImNqbjUzMTE5ZTBmcXgzcG81ZHBwMnFsOXYifQ.8HRRLKHEJA0AismGk2SX2g";var W=[{id:0,color:"#0099cd"},{id:1,color:"#ffca5d"},{id:2,color:"#00cd99"}];W.forEach((function(e){e.hoverColor=v(e.color,-.3)}));var Y=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this)).state={mapLoaded:!1,currentColorLayer:0,currentUnitLayer:"",unitLayers:{},pointLayers:{},mapSelection:[],selectedElection:0,focusRace:0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={nc:{center:[-80.1,35.2154083],zoom:5.5}};this.map=new window.mapboxgl.Map({container:this.refs.map,style:"mapbox://styles/mapbox/light-v10",center:t.nc.center,zoom:t.nc.zoom,attributionControl:!1,pitchWithRotate:!1,dragPan:!0,touchZoomRotate:!0}),this.map.on("load",(function(){var t=new window.MapboxGeocoder({accessToken:window.mapboxgl.accessToken,marker:{color:"orange"},mapboxgl:window.mapboxgl});e.map.addControl(t,"top-left"),e.map.addControl(new window.mapboxgl.NavigationControl),fetch("/nc-districts/nc-geo/current_districts.geojson").then((function(e){return e.json()})).then((function(t){e.map.addSource("districts",{type:"geojson",data:t}),new z(e.map,{id:"districts",source:"districts",type:"line",paint:{"line-color":"#555","line-width":1.5}})})),e.map.addSource("precincts",{type:"vector",url:"mapbox://districtr.nc_precincts"});var a=new z(null,{id:"precincts-borders",source:"precincts","source-layer":"nc_precincts",type:"line",paint:{"line-color":"#777777","line-width":["interpolate",["linear"],["zoom"],0,0,7,1],"line-opacity":.3}}),n=new z(null,{id:"precincts",source:"precincts","source-layer":"nc_precincts",type:"fill",paint:{"fill-color":g(W),"fill-opacity":.8}}),r=new J(n,20,e.setMapSelection.bind(e));e.map.addSource("blockgroups",{type:"vector",url:"mapbox://districtr.nc_bg_blockgroups"});var i=new z(e.map,{id:"blockgroups-borders",source:"blockgroups","source-layer":"nc_bg_blockgroups",type:"line",paint:{"line-color":"#777777","line-width":["interpolate",["linear"],["zoom"],0,0,7,1],"line-opacity":.3}}),c=new z(e.map,{id:"blockgroups",source:"blockgroups","source-layer":"nc_bg_blockgroups",type:"fill",paint:{"fill-color":g(W),"fill-opacity":.8}}),o=new J(c,20,e.setMapSelection.bind(e));o.activate(),fetch("/nc-districts/nc-geo/nc_industry.geojson").then((function(e){return e.json()})).then((function(t){e.map.addSource("enviro",{type:"geojson",data:t}),e.state.pointLayers.Emitters=new z(null,{id:"enviro",source:"enviro",type:"circle",paint:w})})),fetch("/nc-districts/nc-geo/nc_colleges.geojson").then((function(e){return e.json()})).then((function(t){e.map.addSource("colleges",{type:"geojson",data:t}),e.state.pointLayers.Colleges=new z(null,{id:"colleges",source:"colleges",type:"circle",paint:{"circle-radius":4,"circle-color":"blue"}})})),fetch("/nc-districts/nc-geo/nc_hospitals.geojson").then((function(e){return e.json()})).then((function(t){e.map.addSource("hospitals",{type:"geojson",data:t}),e.state.pointLayers.Hospitals=new z(null,{id:"hospitals",source:"hospitals",type:"circle",paint:{"circle-radius":4,"circle-color":"red"}})})),fetch("/nc-districts/nc-geo/nc-ccr.csv").then((function(e){return e.text()})).then((function(t){var a=[];t.split("\n").forEach((function(e){if((e=e.split(",")).length>1){var t=1*e[e.length-2],n=1*e[e.length-1];a.push({type:"Feature",geometry:{type:"Point",coordinates:[n,t]}})}})),e.map.addSource("coal",{type:"geojson",data:{type:"FeatureCollection",features:a}}),e.state.pointLayers["Coal Ash"]=new z(null,{id:"coal",source:"coal",type:"circle",paint:{"circle-radius":4,"circle-color":"black"}})})),e.setState({currentUnitLayer:"blockgroups",unitLayers:{blockgroups:c,blockgroups_border:i,blockgroups_cursor:o,precincts:n,precincts_border:a,precincts_cursor:r},mapLoaded:!0}),e.paintAge()}))}},{key:"setMapSelection",value:function(e){this.setState({mapSelection:e})}},{key:"changeElection",value:function(e){var t,a,n=e?e.target.value:this.state.selectedElection,r=F[n];this.state.unitLayers.precincts.setPaintProperty("fill-color",(t=r[2],a=r[3],["case",[">",["get",t],["get",a]],["case",["==",["feature-state","hover"],!0],["interpolate",["linear"],["/",["get",t],["+",["get",t],["get",a]]]].concat(Object(f.a)(_)),["interpolate",["linear"],["/",["get",t],["+",["get",t],["get",a]]]].concat(Object(f.a)(k))],["case",["==",["feature-state","hover"],!0],["interpolate",["linear"],["/",["get",a],["+",["get",t],["get",a]]]].concat(Object(f.a)(L)),["interpolate",["linear"],["/",["get",a],["+",["get",t],["get",a]]]].concat(Object(f.a)(S))]])),this.setState({selectedElection:n})}},{key:"changeFocus",value:function(e){var t=e?e.target.value:this.state.focusRace,a=B[t];this.state.unitLayers.blockgroups.setPaintProperty("fill-color",P(a)),this.setState({focusRace:t})}},{key:"paintAge",value:function(){this.state.unitLayers.blockgroups.setPaintProperty("fill-color",b),this.state.unitLayers.blockgroups.setPaintProperty("fill-opacity",.4)}},{key:"paintIncome",value:function(){this.state.unitLayers.blockgroups.setPaintProperty("fill-color",E),this.state.unitLayers.blockgroups.setPaintProperty("fill-opacity",.4)}},{key:"paintRental",value:function(){this.state.unitLayers.blockgroups.setPaintProperty("fill-color",O),this.state.unitLayers.blockgroups.setPaintProperty("fill-opacity",.4)}},{key:"paintBBand",value:function(){this.state.unitLayers.blockgroups.setPaintProperty("fill-color",N),this.state.unitLayers.blockgroups.setPaintProperty("fill-opacity",.4)}},{key:"paintRace",value:function(){this.state.unitLayers.blockgroups.setPaintProperty("fill-color",P(B[this.state.focusRace])),this.state.unitLayers.blockgroups.setPaintProperty("fill-opacity",.6)}},{key:"switchLayer",value:function(e){var t=p[e];"points"===p[this.state.currentColorLayer].units&&this.state.pointLayers[p[this.state.currentColorLayer].name].remove(),"points"===t.units?(this.state.pointLayers[t.name].addToMap(this.map),this.setState({currentColorLayer:e})):t.units===this.state.currentUnitLayer?this.setState({currentColorLayer:e}):(this.state.unitLayers[this.state.currentUnitLayer+"_cursor"].deactivate(),this.state.unitLayers[this.state.currentUnitLayer].remove(),this.state.unitLayers[this.state.currentUnitLayer+"_border"].remove(),this.state.unitLayers[t.units].addToMap(this.map),this.state.unitLayers[t.units+"_border"].addToMap(this.map),this.state.unitLayers[t.units+"_cursor"].activate(),this.setState({currentUnitLayer:t.units,currentColorLayer:e})),"Age"===t.name?this.paintAge():"Income"===t.name?this.paintIncome():"Race"===t.name?this.paintRace():"Rental"===t.name?this.paintRental():"Broadband"===t.name?this.paintBBand():"Elections"===t.name&&this.changeElection()}},{key:"render",value:function(){var e=p[this.state.currentColorLayer].name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"options"},r.a.createElement(d,{switchLayer:this.switchLayer.bind(this),disabled:!this.state.mapLoaded})),r.a.createElement("div",{className:"mapContainer"},r.a.createElement(h,null),r.a.createElement("div",{className:"map",ref:"map"})),r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"outputs"},"Units: ",this.state.currentUnitLayer,r.a.createElement("br",null),"Age"===e?r.a.createElement(M,{selected:this.state.mapSelection}):null,"Income"===e?r.a.createElement(R,{selected:this.state.mapSelection}):null,"Rental"===e?r.a.createElement(j,{selected:this.state.mapSelection}):null,"Elections"===e?r.a.createElement(C,{selected:this.state.mapSelection,selectedElection:this.state.selectedElection,changeElection:this.changeElection.bind(this)}):null,"Race"===e?r.a.createElement(I,{selected:this.state.mapSelection,focusRace:this.state.focusRace,changeFocus:this.changeFocus.bind(this)}):null,"Emitters"===e?r.a.createElement(x,{selected:this.state.mapSelection}):null,"Hospitals"===e?r.a.createElement(H,{selected:this.state.mapSelection}):null,"Colleges"===e?r.a.createElement(U,{selected:this.state.mapSelection}):null,"Coal Ash"===e?r.a.createElement(q,{selected:this.state.mapSelection}):null,"Broadband"===e?r.a.createElement(D,{selected:this.state.mapSelection}):null)))}}]),a}(r.a.Component);var Z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("section",null,r.a.createElement(Y,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.f19df412.chunk.js.map