(this.webpackJsonpnc=this.webpackJsonpnc||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var o=a(0),r=a.n(o),n=a(9),i=a.n(n),s=(a(15),a(16),a(17),a(1)),c=a(2),u=a(5),l=a(6),h=a(4),d=a(7),v=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this)).state={selectItem:0},o.clickTest=o.clickTest.bind(Object(d.a)(o)),o}return Object(c.a)(a,[{key:"clickTest",value:function(e,t){e.preventDefault(),this.setState({selectItem:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("ul",{className:"nav nav-pills"},this.props.labels.map((function(t,a){return r.a.createElement("li",{className:"nav-item",key:a},r.a.createElement("a",{className:"nav-link "+(a===e.state.selectItem?"active":""),href:"#",onClick:function(t){e.clickTest(t,a)}},t))})))}}]),a}(r.a.Component),p=a(3);var f=function(){function e(t,a,o){Object(s.a)(this,e),this.map=t,this.id=a.id,this.sourceId=a.source,this.type=a.type,this.sourceLayer=a["source-layer"],o?o(t,a):t.addLayer(a),this.getFeature=this.getFeature.bind(this)}return Object(c.a)(e,[{key:"setOpacity",value:function(e,t){this.setPaintProperty("".concat(t?"text":this.type.replace("symbol","icon"),"-opacity"),e)}},{key:"setColor",value:function(e){this.setPaintProperty("".concat(this.type,"-color"),e)}},{key:"getColor",value:function(){return this.getPaintProperty("".concat(this.type,"-color"))}},{key:"setPaintProperties",value:function(e){for(var t in e)this.setPaintProperty(t,e[t])}},{key:"setFeatureState",value:function(e,t){this.map.setFeatureState({source:this.sourceId,sourceLayer:this.sourceLayer,id:e},t)}},{key:"setCountyState",value:function(e,t,a,o,r,n){var i=this,s=new Set,c=["all",["has",t]];["COUNTY","CTYNAME","CNTYNAME","COUNTYFP10","cnty_nm","locality"].includes(t)?c.push(["==",["get",t],e]):(c.push([">=",["get",t],e]),c.push(["<",["get",t],isNaN(1*e)||t.toLowerCase().includes("name")?e+"z":String(Number(e)+1)])),this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer,filter:c}).forEach((function(e){s.has(e.id)||(s.add(e.id),e.state=i.getFeatureState(e.id),o(e)&&(r[e.id]={properties:e.properties,color:String(e.state.color)},n.forEach((function(t){t(e,a.color)})),i.setFeatureState(e.id,Object(p.a)({},e.state,{color:a.color})),e.state.color=a.color))}))}},{key:"setPaintProperty",value:function(e,t){this.map.setPaintProperty(this.id,e,t)}},{key:"getPaintProperty",value:function(e){return this.map.getPaintProperty(this.id,e)}},{key:"getFeatureState",value:function(e){return this.map.getFeatureState({source:this.sourceId,sourceLayer:this.sourceLayer,id:e})}},{key:"getFeature",value:function(e){return this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer,filter:["==",["id"],e]})[0]}},{key:"queryRenderedFeatures",value:function(){return this.map.queryRenderedFeatures(null,{layers:[this.id]})}},{key:"querySourceFeatures",value:function(){return this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer})}},{key:"getAssignment",value:function(e){return this.getFeatureState(e).color}},{key:"setAssignment",value:function(e,t){this.setFeatureState(e.id,Object(p.a)({},e.state,{color:t}))}},{key:"on",value:function(e){for(var t,a=arguments.length,o=new Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];(t=this.map).on.apply(t,[e,this.id].concat(o))}},{key:"off",value:function(e){for(var t,a=arguments.length,o=new Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];(t=this.map).off.apply(t,[e,this.id].concat(o))}},{key:"untilSourceLoaded",value:function(e){var t=this;if(this.map.isSourceLoaded(this.sourceId))return e();this.map.on("sourcedata",(function a(){return e((function(){return t.map.off("sourcedata",a)}))}))}}]),e}(),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e,o){var r;return Object(s.a)(this,a),(r=t.call(this,e)).radius=o,r.hoveredFeatures=[],r}return Object(c.a)(a,[{key:"hoverOff",value:function(){var e=this;this.hoveredFeatures.forEach((function(t){var a=e.layer.getFeatureState(t.id);e.layer.setFeatureState(t.id,Object(p.a)({},a,{hover:!1}))})),this.hoveredFeatures=[]}},{key:"hoverOn",value:function(e){var t=this;this.hoveredFeatures=e,this.deactivatedHover||this.hoveredFeatures.forEach((function(e){t.layer.setFeatureState(e.id,Object(p.a)({},e.state,{hover:!0}))}))}},{key:"onMouseMove",value:function(e){var t=function(e,t){var a=[e.x+t,e.y+t];return[[e.x-t,e.y-t],a]}(e.point,this.radius),a=this.layer.map.queryRenderedFeatures(t,{layers:[this.layer.id]});a.length>0&&(this.hoverOff(),this.hoverOn(a))}}]),a}(function(){function e(t){Object(s.a)(this,e),this.layer=t,this.hoveredFeature=null,this.deactivatedHover=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.hoverOff=this.hoverOff.bind(this)}return Object(c.a)(e,[{key:"hoverOff",value:function(){null!==this.hoveredFeature&&(this.layer.setFeatureState(this.hoveredFeature.id,Object(p.a)({},this.hoveredFeature.state,{hover:!1})),this.hoveredFeature=null)}},{key:"hoverOn",value:function(e){this.hoveredFeature=e,this.deactivatedHover||this.layer.setFeatureState(e.id,Object(p.a)({},e.state,{hover:!0}))}},{key:"onMouseMove",value:function(e){e.features.length>0&&(this.hoverOff(),this.hoverOn(e.features[0]))}},{key:"onMouseLeave",value:function(){this.hoverOff()}},{key:"activate",value:function(e){e?this.deactivatedHover=!1:(this.layer.on("mousemove",this.onMouseMove),this.layer.on("mouseleave",this.onMouseLeave),this.layer.on("touchmove",this.onMouseMove),this.layer.on("touchend",this.onMouseLeave))}},{key:"deactivate",value:function(e){e?this.deactivatedHover=!0:(this.layer.off("mousemove",this.onMouseMove),this.layer.off("mouseleave",this.onMouseLeave),this.layer.off("touchmove",this.onMouseMove),this.layer.off("touchend",this.onMouseLeave))}}]),e}());window.mapboxgl.accessToken="pk.eyJ1IjoiZGlzdHJpY3RyIiwiYSI6ImNqbjUzMTE5ZTBmcXgzcG81ZHBwMnFsOXYifQ.8HRRLKHEJA0AismGk2SX2g";var m=[{id:0,color:"#0099cd"},{id:1,color:"#ffca5d"},{id:2,color:"#00cd99"}];function b(e){var t=["match",["feature-state","color"]].concat(Object(h.a)(e.map((function(e){return[e.id,e.color]})).reduce((function(e,t){return[].concat(Object(h.a)(e),Object(h.a)(t))}))),["rgba(0, 0, 0, 0)"]);return["case",["boolean",["feature-state","hover"],!1],["match",["feature-state","color"]].concat(Object(h.a)(e.map((function(e){return[e.id,e.hoverColor]})).reduce((function(e,t){return[].concat(Object(h.a)(e),Object(h.a)(t))}))),["#aaaaaa"]),t]}m.forEach((function(e){e.hoverColor=function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var a,o,r="#";for(o=0;o<3;o++)a=parseInt(e.substr(2*o,2),16),r+=("00"+(a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16))).substr(a.length);return r}(e.color,-.3)}));var g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this)).state={currentLayer:["precincts","draw"]},o}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={nc:{center:[-80.1,35.2154083],zoom:5.5}};this.map=new window.mapboxgl.Map({container:this.refs.map,style:"mapbox://styles/mapbox/light-v10",center:t.nc.center,zoom:t.nc.zoom,attributionControl:!1,pitchWithRotate:!1,dragPan:!0,touchZoomRotate:!0}),this.map.on("load",(function(){var t=new window.MapboxGeocoder({accessToken:window.mapboxgl.accessToken,marker:{color:"orange"},mapboxgl:window.mapboxgl});e.map.addControl(t,"top-left"),e.map.addControl(new window.mapboxgl.NavigationControl),e.map.addSource("state_outline",{type:"vector",url:"mapbox://mapbox.hist-pres-election-state"}),e.map.addLayer({id:"state_outline",source:"state_outline","source-layer":"historical_pres_elections_state",type:"line",paint:{"line-color":"#555","line-width":["case",["==",["get","state_abbrev"],"NC"],1.5,0]}}),e.map.addSource("blockgroups",{type:"vector",url:"mapbox://districtr.nc_bg_blockgroups"}),e.map.addLayer({id:"bg-borders",source:"blockgroups","source-layer":"nc_bg_blockgroups",type:"line",paint:{"line-color":"#777777","line-width":["interpolate",["linear"],["zoom"],0,0,7,1],"line-opacity":.3}});var a=new f(e.map,{id:"blockgroups",source:"blockgroups","source-layer":"nc_bg_blockgroups",type:"fill",paint:{"fill-color":b(m),"fill-opacity":.8}});new y(a,20).activate()}))}},{key:"switchLayer",value:function(e){this.state.currentLayer&&this.map.removeLayer(this.state.currentLayer)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"map",ref:"map"}),r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"options"},r.a.createElement(v,{labels:["Age","Elections","Environment","Food","Race","Landmarks"],switchLayer:this.switchLayer})),r.a.createElement("div",{className:"outputs"},r.a.createElement("input",{type:"range"}))))}}]),a}(r.a.Component);var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Redistricting in North Carolina"),r.a.createElement("h3",null,"Demo Version")),r.a.createElement("section",null,r.a.createElement("p",null,"We have developed a demo app to map out statewide and local decisions in redistricting. Interactive layers make it possible to analyze district lines based on age, race, environmental health, past elections, and other factors."),r.a.createElement(g,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.e0c838db.chunk.js.map