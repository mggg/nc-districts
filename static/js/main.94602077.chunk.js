(this.webpackJsonpnc=this.webpackJsonpnc||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),i=a.n(c),o=(a(15),a(16),a(17),a(2)),s=a(3),l=a(4),u=a(7),m=a(8),p=a(9);var h=function(){function e(t,a,n){Object(o.a)(this,e),this.map=t,this.layer=a,this.id=a.id,this.sourceId=a.source,this.type=a.type,this.sourceLayer=a["source-layer"],n?n(t,a):t&&t.addLayer(a),this.getFeature=this.getFeature.bind(this)}return Object(s.a)(e,[{key:"addToMap",value:function(e){e&&!this.map&&(this.map=e,e.addLayer(this.layer))}},{key:"remove",value:function(){this.map&&(this.map.removeLayer(this.id),this.map=null)}},{key:"setOpacity",value:function(e,t){this.setPaintProperty("".concat(t?"text":this.type.replace("symbol","icon"),"-opacity"),e)}},{key:"setColor",value:function(e){this.setPaintProperty("".concat(this.type,"-color"),e)}},{key:"getColor",value:function(){return this.getPaintProperty("".concat(this.type,"-color"))}},{key:"setPaintProperties",value:function(e){for(var t in e)this.setPaintProperty(t,e[t])}},{key:"setFeatureState",value:function(e,t){this.map.setFeatureState({source:this.sourceId,sourceLayer:this.sourceLayer,id:e},t)}},{key:"setPaintProperty",value:function(e,t){this.map.setPaintProperty(this.id,e,t)}},{key:"getPaintProperty",value:function(e){return this.map.getPaintProperty(this.id,e)}},{key:"getFeatureState",value:function(e){return this.map.getFeatureState({source:this.sourceId,sourceLayer:this.sourceLayer,id:e})}},{key:"getFeature",value:function(e){return this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer,filter:["==",["id"],e]})[0]}},{key:"queryRenderedFeatures",value:function(){return this.map.queryRenderedFeatures(null,{layers:[this.id]})}},{key:"querySourceFeatures",value:function(){return this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer})}},{key:"getAssignment",value:function(e){return this.getFeatureState(e).color}},{key:"setAssignment",value:function(e,t){this.setFeatureState(e.id,Object(p.a)({},e.state,{color:t}))}},{key:"on",value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];(t=this.map).on.apply(t,[e,this.id].concat(n))}},{key:"off",value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];(t=this.map).off.apply(t,[e,this.id].concat(n))}},{key:"untilSourceLoaded",value:function(e){var t=this;if(this.map.isSourceLoaded(this.sourceId))return e();this.map.on("sourcedata",(function a(){return e((function(){return t.map.off("sourcedata",a)}))}))}}]),e}();a(1);function d(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var a,n,r="#";for(n=0;n<3;n++)a=parseInt(e.substr(2*n,2),16),r+=("00"+(a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16))).substr(a.length);return r}function f(e){return["case",["==",["feature-state","hover"],!0],d(e,-.3),e]}f("#edf8fb"),f("#ccece6"),f("#99d8c9"),f("#66c2a4"),f("#2ca25f"),f("#006d2c"),f("#edf8fb"),f("#ccece6"),f("#99d8c9"),f("#66c2a4"),f("#2ca25f"),f("#006d2c");f("#FFA500"),f("#00008B"),f("#FFA500"),f("#00008B");var y=[["White","NH_WHITE",1,"#f00"],["Black","NH_BLACK",1,"#f0f"],["Hispanic","HISP",.81,"#00f"],["Asian","NH_ASIAN",.65,"#0f0"],["American Indian","NH_AMIN",.93,"#ff0"],["Native Hawaiian or Pacific Islander","NH_NHPI",.02,"#0ff"],["Other","NH_OTHER",.2,"#ccc"],["2+ Races","NH_2MORE",.13,"#ccc"]];[0,1,2,3,4,5,6,7,8].map((function(e,t){return"rgba(".concat(200*(8-t)/8,", ").concat(200*(8-t)/8,", 255, ").concat(t/8*.6,")")}));window.mapboxgl.accessToken="pk.eyJ1IjoiZGlzdHJpY3RyIiwiYSI6ImNqbjUzMTE5ZTBmcXgzcG81ZHBwMnFsOXYifQ.8HRRLKHEJA0AismGk2SX2g";var v=[{name:"Charlotte",center:[-80.8428907,35.2241038],zoom:9},{name:"Raleigh",center:[-78.6394881,35.7780928],zoom:10},{name:"Greensboro",center:[-79.794579,36.0728101],zoom:9},{name:"Durham",center:[-78.9068315,35.99429],zoom:9},{name:"Winston-Salem",center:[-80.2495087,36.0971022],zoom:9},{name:"Fayetteville",center:[-78.880853,35.0517772],zoom:9},{name:"Cary",center:[-78.7847445,35.7839415],zoom:10},{name:"Wilmington",center:[-77.8971587,34.20855],zoom:10},{name:"High Point",center:[-80.0104744,35.9557965],zoom:10}],E=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this)).state={mapLoaded:!1,layer:"federal",selectDemo:-1},n.showBorder=n.showBorder.bind(Object(l.a)(n)),n.layers={federal:[],house:[],senate:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.maps=[],this.fillPrecincts=[],fetch("/nc-districts/nc-geo/current_districts.geojson").then((function(e){return e.json()})).then((function(t){fetch("/nc-districts/nc-geo/state_house_districts.geojson?r2").then((function(e){return e.json()})).then((function(a){fetch("/nc-districts/nc-geo/state_senate_districts.geojson").then((function(e){return e.json()})).then((function(n){v.forEach((function(r,c){var i=new window.mapboxgl.Map({container:e.refs["map"+c],style:"mapbox://styles/mapbox/light-v10",center:r.center,zoom:r.zoom,attributionControl:!1,pitchWithRotate:!1,dragPan:!0,touchZoomRotate:!0});i.on("load",(function(){i.addControl(new window.mapboxgl.NavigationControl),i.addSource("districts",{type:"geojson",data:t}),e.layers.federal.push(new h(i,{id:"districts",source:"districts",type:"line",paint:{"line-color":"#555","line-width":1.5}})),i.addSource("state_senate",{type:"geojson",data:n}),e.layers.senate.push(new h(i,{id:"state_senate",source:"state_senate",type:"line",paint:{"line-color":"#555","line-width":1.5,"line-opacity":0}})),i.addSource("state_house",{type:"geojson",data:a}),e.layers.house.push(new h(i,{id:"state_house",source:"state_house",type:"line",paint:{"line-color":"#555","line-width":1.5,"line-opacity":0}})),i.addSource("precincts",{type:"vector",url:"mapbox://districtr.nc_precincts"}),new h(i,{id:"precincts-borders",source:"precincts","source-layer":"nc_precincts",type:"line",paint:{"line-color":"#777777","line-width":["interpolate",["linear"],["zoom"],0,0,7,1],"line-opacity":.3}}),e.fillPrecincts.push(new h(i,{id:"precincts",source:"precincts","source-layer":"nc_precincts",type:"fill",paint:{"fill-color":"#ccc","fill-opacity":0}}))}))}))}))}))}))}},{key:"setMapSelection",value:function(){}},{key:"showBorder",value:function(e){this.layers[this.state.layer].forEach((function(e){e.setOpacity(0)})),this.layers[e].forEach((function(e){e.setOpacity(1)})),this.setState({layer:e})}},{key:"changeDemo",value:function(e){var t=e.target.value;this.fillPrecincts.forEach((function(e){var a;1*t==-1?e.setOpacity(0):(e.setPaintProperty("fill-color",["case",["==",["get","TOTPOP"],0],"#ccc",["interpolate",["linear"],["/",["get",(a=y[t])[1]],["get","TOTPOP"]],0,["case",["==",["feature-state","hover"],!0],"rgba(140, 140, 179, 0)","rgba(200, 200, 255, 0)"],a[2]+.01,["case",["==",["feature-state","hover"],!0],"rgba(0, 0, 179, 0.6)","rgba(0, 0, 255, 0.6)"]]]),e.setOpacity(.45))})),this.setState({selectDemo:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"options"},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"districts",checked:"federal"===this.state.layer,value:"fed",onChange:function(t){e.showBorder("federal")}}),r.a.createElement("span",null,"US Congress")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"districts",checked:"senate"===this.state.layer,value:"senate",onChange:function(t){e.showBorder("senate")}}),r.a.createElement("span",null,"State Senate")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"districts",checked:"house"===this.state.layer,value:"house",onChange:function(t){e.showBorder("house")}}),r.a.createElement("span",null,"State House")),r.a.createElement("label",null,r.a.createElement("select",{value:this.state.selectDemo,onChange:this.changeDemo.bind(this)},r.a.createElement("option",{value:"-1"},"By Precinct"),r.a.createElement("option",{value:"0"},"White"),r.a.createElement("option",{value:"1"},"Black"),r.a.createElement("option",{value:"2"},"Hispanic"),r.a.createElement("option",{value:"3"},"Asian"),r.a.createElement("option",{value:"4"},"American Indian"),r.a.createElement("option",{value:"5"},"Native Hawaiian / Pacific Islander"),r.a.createElement("option",{value:"6"},"Other"),r.a.createElement("option",{value:"7"},"Two or more")))),r.a.createElement("div",{className:"map-row"},r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[0].name),r.a.createElement("div",{className:"map-square",ref:"map0"})),r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[1].name),r.a.createElement("div",{className:"map-square",ref:"map1"})),r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[2].name),r.a.createElement("div",{className:"map-square",ref:"map2"}))),r.a.createElement("div",{className:"map-row"},r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[3].name),r.a.createElement("div",{className:"map-square",ref:"map3"})),r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[4].name),r.a.createElement("div",{className:"map-square",ref:"map4"})),r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[5].name),r.a.createElement("div",{className:"map-square",ref:"map5"}))),r.a.createElement("div",{className:"map-row"},r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[6].name),r.a.createElement("div",{className:"map-square",ref:"map6"})),r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[7].name),r.a.createElement("div",{className:"map-square",ref:"map7"})),r.a.createElement("div",{className:"map-cell"},r.a.createElement("h4",null,v[8].name),r.a.createElement("div",{className:"map-square",ref:"map8"}))))}}]),a}(r.a.Component);var g=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("section",null,r.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.94602077.chunk.js.map